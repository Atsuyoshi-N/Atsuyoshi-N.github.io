{
    "componentChunkName": "component---src-templates-posts-js",
    "path": "/blog/1week_gatsby_challenge",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"next":{"frontmatter":{"showTitle":true,"title":"ABC154D-Dice in Line"},"fields":{"slug":"/blog/abc-154d"}},"previous":null},{"next":{"frontmatter":{"showTitle":true,"title":"JOI2006/2007 最古の遺跡"},"fields":{"slug":"/blog/old_heritage"}},"previous":{"fields":{"slug":"/blog/1week_gatsby_challenge"},"frontmatter":{"showTitle":true,"title":"約10日でポートフォリオとブログを改善した話"}}},{"next":{"frontmatter":{"showTitle":true,"title":"Square869120 B-AtCoder Markets"},"fields":{"slug":"/blog/Square869120Contest6-2"}},"previous":{"fields":{"slug":"/blog/abc-154d"},"frontmatter":{"showTitle":true,"title":"ABC154D-Dice in Line"}}},{"next":null,"previous":{"fields":{"slug":"/blog/old_heritage"},"frontmatter":{"showTitle":true,"title":"JOI2006/2007 最古の遺跡"}}}]},"markdownRemark":{"fields":{"slug":"/blog/1week_gatsby_challenge"},"id":"bff982b3-8149-5c28-a990-276b6e331ada","html":"<p>今回、およそ 10 日間で昔 Gatsby で作成していたブログの UI を改善し、トップページをポートフォリオとして公開しました。その過程でつまづいたことなどの共有をしたいと思います。</p>\n<p>リポジトリはこちら <a href=\"https://github.com/Atsuyoshi-N/Atsuyoshi-N.github.io\" target=\"_blank\" rel=\"noopener noreferrer\">Github</a></p>\n<h2 id=\"はじめに\" style=\"position:relative;\"><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\" aria-label=\"はじめに permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>はじめに</h2>\n<p>作り始めるきっかけになったのは次の記事のおかげです。</p>\n<p><a href=\"https://qiita.com/p1ass/items/a01578b782f17f573510\" target=\"_blank\" rel=\"noopener noreferrer\">フロント未学習の大学生が 1 週間で Vue.js を使ったポートフォリオを作った話</a></p>\n<p>これを読んで、昔テンプレートそのままの Gatsby で作ったブログページがあることを思い出しました。そこで 1 週間程度でポートフォリオもブログページも改善できたらいいなと思い挑戦してみました。</p>\n<p>結果的に出来たのは、トップページのポートフォリオと、ブログ一覧ページ、ブログ詳細記事(このページ)です。</p>\n<p>上の記事の執筆者である p1ass さんをはじめとする様々な方のブログやポートフォリオを参考にしつつ、React と Material-UI で作ってみました。(<del>Material-UI を使用したのは、CSS を書きたくなかったからとタイムラインを簡単に使用できるからです。</del>)</p>\n<h2 id=\"作った機能\" style=\"position:relative;\"><a href=\"#%E4%BD%9C%E3%81%A3%E3%81%9F%E6%A9%9F%E8%83%BD\" aria-label=\"作った機能 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>作った機能</h2>\n<p>次のうち、強調した部分について次のセクションで触れます。</p>\n<h3 id=\"ポートフォリオページ\" style=\"position:relative;\"><a href=\"#%E3%83%9D%E3%83%BC%E3%83%88%E3%83%95%E3%82%A9%E3%83%AA%E3%82%AA%E3%83%9A%E3%83%BC%E3%82%B8\" aria-label=\"ポートフォリオページ permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ポートフォリオページ</h3>\n<ul>\n<li>Profile を表示するテーブル</li>\n<li>経歴を表示するタイムライン</li>\n<li><strong>Skill Level を表示するパイチャート</strong></li>\n<li>成果物を表示するアコーディオンメニュー</li>\n<li><strong>レスポンシブ対応</strong></li>\n</ul>\n<h3 id=\"ブログ一覧個別ページ\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E4%B8%80%E8%A6%A7%E5%80%8B%E5%88%A5%E3%83%9A%E3%83%BC%E3%82%B8\" aria-label=\"ブログ一覧個別ページ permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログ一覧/個別ページ</h3>\n<ul>\n<li><strong>レイアウトのカードから Material-UI のカードへと移行</strong></li>\n<li>タグの実装</li>\n<li><strong>ブログ一覧ページの個別のブログの description で excerpt の format に HTML を指定</strong></li>\n<li>next, prev 記事の実装</li>\n</ul>\n<h3 id=\"その他\" style=\"position:relative;\"><a href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\" aria-label=\"その他 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>その他</h3>\n<ul>\n<li>Header の項目を増やすこと</li>\n<li><strong>Header のレスポンシブ対応</strong></li>\n<li><strong>ブログカテゴリーの実装</strong></li>\n<li>RSS フィードの設置</li>\n<li><strong>gatsby-node.js を更新しても反映されない</strong></li>\n<li><strong>ページリロードで記事が表示されなくなる</strong></li>\n</ul>\n<h2 id=\"共有したい点\" style=\"position:relative;\"><a href=\"#%E5%85%B1%E6%9C%89%E3%81%97%E3%81%9F%E3%81%84%E7%82%B9\" aria-label=\"共有したい点 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>共有したい点</h2>\n<h3 id=\"skill-level-を表すパイチャート\" style=\"position:relative;\"><a href=\"#skill-level-%E3%82%92%E8%A1%A8%E3%81%99%E3%83%91%E3%82%A4%E3%83%81%E3%83%A3%E3%83%BC%E3%83%88\" aria-label=\"skill level を表すパイチャート permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Skill level を表すパイチャート</h3>\n<p>結論を言うと、パイチャートの表示には、<a href=\"https://recharts.org/en-US/\" target=\"_blank\" rel=\"noopener noreferrer\">Recharts</a>の<a href=\"https://recharts.org/en-US/examples/CustomActiveShapePieChart\" target=\"_blank\" rel=\"noopener noreferrer\">CustomActiveShapePieChart</a>を使用しています。公式の Example が極めて見難いので苦労しました。このライブラリを使用したのは愛用させてもらってる<a href=\"https://kenkoooo.com/atcoder#/table/\" target=\"_blank\" rel=\"noopener noreferrer\">AtCoder Problems</a>で使用されていたためです。</p>\n<h3 id=\"レスポンシブ対応\" style=\"position:relative;\"><a href=\"#%E3%83%AC%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B7%E3%83%96%E5%AF%BE%E5%BF%9C\" aria-label=\"レスポンシブ対応 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>レスポンシブ対応</h3>\n<p>これには苦労しました。Gatsby 上で Material-UI の makeStyles が開発環境ではきちんとスタイルが表示されるのに、本番環境になるとスタイルが崩れてしまう問題に直面しました。</p>\n<p>はじめ経歴を表すタイムラインを表示するとその下のコンポーネントが崩れることを確認し、モバイルと PC ごとに表示を分けている親コンポーネントにスタイルのクラスを渡すことで修正できました。</p>\n<p>しかしながら、あとから Header を追加すると同様の問題に直面したため、共通点を考えたところ、<code class=\"language-text\">react-responsive</code>を使用していることを発見しました。</p>\n<p>そこで、react-responsive を<a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-breakpoints/\" target=\"_blank\" rel=\"noopener noreferrer\">gatsby-plugin-breakpoints</a>に変更したところ、うまく動くようになりました。これに関しては原因がよくわかりませんが、<a href=\"https://qiita.com/horri1520/items/cee083e846c01d38b622\" target=\"_blank\" rel=\"noopener noreferrer\">Python しか触ったことのなかった大学生が React(Gatsby.js)で Web 開発した話</a>に助けられました。</p>\n<h3 id=\"レイアウトのカードから-material-ui-のカードへと移行\" style=\"position:relative;\"><a href=\"#%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88%E3%81%AE%E3%82%AB%E3%83%BC%E3%83%89%E3%81%8B%E3%82%89-material-ui-%E3%81%AE%E3%82%AB%E3%83%BC%E3%83%89%E3%81%B8%E3%81%A8%E7%A7%BB%E8%A1%8C\" aria-label=\"レイアウトのカードから material ui のカードへと移行 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>レイアウトのカードから Material-UI のカードへと移行</h3>\n<p>これは表題の通りです。なぜ移行したかと言うと、長いタイトルのブログがあった時、そのタイトルが見切れて表示されなかったからです。</p>\n<p>Material-UI には標準でカードコンポーネントがあり、とても便利でした。</p>\n<h3 id=\"ブログ一覧ページの-description-の改善\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E4%B8%80%E8%A6%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AE-description-%E3%81%AE%E6%94%B9%E5%96%84\" aria-label=\"ブログ一覧ページの description の改善 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログ一覧ページの description の改善</h3>\n<p>当初、ブログ一覧画面の description には数式の部分が空白で表示されているという問題がありました。GraphQL の IDE を眺めていると、excerpt に format を指定できることを発見しました。format を HTML にして渡すことによって数式を含んだ description を精製できました。</p>\n<h3 id=\"ブログカテゴリーの実装\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%AD%E3%82%B0%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%83%BC%E3%81%AE%E5%AE%9F%E8%A3%85\" aria-label=\"ブログカテゴリーの実装 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブログカテゴリーの実装</h3>\n<p>他の方のブログを見ていると、タグとカテゴリーの両方を活用しているケースがあり、自分のブログにもその機能が欲しいなと思い実装しました。</p>\n<p>基本的にはタグの実装と同じです。タグの実装については、公式ドキュメントが素晴らしいので、公式ドキュメントを参照するようにしましょう。<a href=\"https://www.gatsbyjs.com/docs/adding-tags-and-categories-to-blog-posts/\" target=\"_blank\" rel=\"noopener noreferrer\">Creating Tags Pages for Blog Posts</a></p>\n<p>もしかしたら gatsby-node.js の実装部分で困るかもしれません。その時は、<a href=\"https://github.com/Atsuyoshi-N/Atsuyoshi-N.github.io/pull/3/commits/4573372411a3ddd2f3b812e1a33095d9cdcc0640\" target=\"_blank\" rel=\"noopener noreferrer\">該当コミット</a>のように frontmatter に category を追加し、categoriesGroup を定義し、category ごとに categoryTemplate を呼び出すことを行うと良いでしょう。(該当コミットでは、gatsby-node.js が gatsby/creeeatePages.js に置き換わっていることに注意)</p>\n<h3 id=\"gatsby-nodejs-を更新しても反映されない\" style=\"position:relative;\"><a href=\"#gatsby-nodejs-%E3%82%92%E6%9B%B4%E6%96%B0%E3%81%97%E3%81%A6%E3%82%82%E5%8F%8D%E6%98%A0%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84\" aria-label=\"gatsby nodejs を更新しても反映されない permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-node.js を更新しても反映されない。</h3>\n<p>prev、next の実装を行ってる時に起こりました。具体的には、createPages の context の中身を変更し、gatsby develop を立ち上げ直しても変更した context の中身が変わらないというものでした。</p>\n<p>解決策としては、<a href=\"https://github.com/gatsbyjs/gatsby/issues/10742#issuecomment-458610239\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub の Issue</a>に書いてある通り、pages や templates の名前の変更を行うと一度は直りましたが、また同じ状況が再現します。</p>\n<p>そのため、キャッシュを消した後(.cache フォルダを削除)に再度 gatsby develop を試したところ、正常に動きました。</p>\n<h3 id=\"ページリロードで記事が表示されなくなる\" style=\"position:relative;\"><a href=\"#%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89%E3%81%A7%E8%A8%98%E4%BA%8B%E3%81%8C%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%AA%E3%81%8F%E3%81%AA%E3%82%8B\" aria-label=\"ページリロードで記事が表示されなくなる permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ページリロードで記事が表示されなくなる。</h3>\n<p>develop 環境では正常に記事が表示されるのに、gatsby build &#x26;&#x26; gatsby serve をすると、記事が全く表示されない問題が生じました。表示される場合と表示されない場合とがあり混乱しました。</p>\n<h4 id=\"表示される場合\" style=\"position:relative;\"><a href=\"#%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%82%8B%E5%A0%B4%E5%90%88\" aria-label=\"表示される場合 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示される場合</h4>\n<ul>\n<li>一覧ページにあるリンクから記事に飛ぶ場合</li>\n</ul>\n<h4 id=\"表示されない場合\" style=\"position:relative;\"><a href=\"#%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E5%A0%B4%E5%90%88\" aria-label=\"表示されない場合 permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表示されない場合</h4>\n<ul>\n<li>直接リンクを叩く場合</li>\n<li>記事詳細画面でリロードを行う場合</li>\n<li>next/prev ボタンで遷移する場合</li>\n</ul>\n<p>友人にも相談し trailing-backspace が怪しいんじゃないかとなり、対応してみましたが改善しませんでした。</p>\n<p>結局、dangerouslySetInnerHTML が production build で動かないことを発見し、対応しました。対応方法については<a href=\"https://qiita.com/atomyah/items/b8ae87ad7265e46bc6d2\" target=\"_blank\" rel=\"noopener noreferrer\">Gatsby + microCMS + Firestore エラー・不具合集</a>と<a href=\"https://github.com/gatsbyjs/gatsby/issues/11108\" target=\"_blank\" rel=\"noopener noreferrer\">dangerouslySetInnerHTML does not work on production builds #11108</a>が参考になりました。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"post-toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>結構大変でしたが、およそ 10 日間でポートフォリオもブログもある程度形にできたのはとても嬉しいです。</p>\n<p>作ってみた感想としては、</p>\n<ul>\n<li>集中すればそれなりのものが作れるということ</li>\n<li>公式のリファレンスをはじめとして誰かのブログなりコードなりが充実してるのが素晴らしい</li>\n</ul>\n<p>ということです。</p>\n<p>ポートフォリオの成果物の欄をもっと充実させられるように日々アウトプットを心がけていきたいですね。</p>","frontmatter":{"date":"2020-11-11","title":"約10日でポートフォリオとブログを改善した話","sidebar":"Blog","showTitle":true,"hideAnchor":true,"tags":["React","Gatsby","Material-UI","Recharts","ポエム"],"category":"Web開発"}}},"pageContext":{"prev":null,"next":{"fields":{"slug":"/blog/Square869120Contest6-2"},"frontmatter":{"category":"競プロ","showTitle":true,"tags":["AtCoder"],"title":"Square869120 B-AtCoder Markets"}}}},
    "staticQueryHashes": ["3649515864"]}